<!DOCTYPE html>
<!-- SEITE 3: Malen -->
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Gemeinsam Malen</title>
    <link rel="stylesheet" href="style.css?v=20260218a">
    <link rel="apple-touch-icon" href="images/home-Icon.png">
    <style>
        /* Change container background to brown */
        body.paint-page .container {
            background-color: rgb(205, 170, 125); /* BurlyWood brown */
        }

        /* Spezifische Styles für die Paint-Seite, um das Design zu verschönern */
        .paint-page .container {
            justify-content: flex-start; /* Inhalt oben beginnen lassen */
            padding-top: 10px;
        }

        /* Hide controls by default on this page */
        .paint-page .controls {
            display: none;
        }

        /* Tages-Challenge Box */
        .daily-challenge-container {
            background-color: rgb(255, 230, 180);
            border: none; /* Border removed as requested */
            border-radius: 15px;
            padding: 15px 30px;
            text-align: center;
            margin-bottom: 20px; /* Abstand vervierfacht */
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            max-width: 90%;
        }
        .daily-challenge-title {
            font-family: 'Dancing Script', cursive;
            color: rgb(111, 71, 48);
            font-size: 2rem;
            margin: 0;
        }
        .daily-animal {
            font-size: 2.5rem;
            font-weight: bold;
            color: rgb(200, 80, 20);
            margin-top: 5px;
        }

        /* Mobile Styles (kopiert von index.html für Konsistenz) */
        @media (max-width: 768px) {
            body:not(.mode-fullscreen) #color-btn { display: none !important; }
            body:not(.mode-fullscreen) #color-panel { display: none !important; }
            body:not(.mode-fullscreen) #brush-btn { display: none !important; }
            body:not(.mode-fullscreen) #brush-panel { display: none !important; }
            .canvas-wrapper {
                height: auto !important;
                aspect-ratio: 1 / 1 !important;
            }
            .field-with-dot {
                flex-direction: column !important;
            }
            .field-with-dot .status-dot {
                order: 2 !important;
                margin: 10px auto 0 auto !important;
            }
            .field-with-dot .canvas-wrapper {
                order: 1 !important;
                width: 100% !important;
            }
        }
        
        /* Fullscreen Layout Styles für Paint Seite */
        .fullscreen-top-bar {
            position: fixed; top: 20px; left: 0; width: 100%;
            display: flex; justify-content: center; gap: 8px; z-index: 200;
            pointer-events: auto;
            padding: 0 10px; box-sizing: border-box;
        }
        .fullscreen-top-bar button { pointer-events: auto; }
        
        .fullscreen-bottom-bar {
            position: fixed; bottom: 20px; left: 0; width: 100%;
            display: flex; justify-content: center; flex-wrap: nowrap; gap: 8px; z-index: 200;
            pointer-events: auto;
            padding: 0 10px; box-sizing: border-box;
        }
        .fullscreen-top-bar button,
        .fullscreen-bottom-bar button { 
            pointer-events: auto; 
            flex: 1 1 0;
            width: auto !important;
            min-width: 0;
            height: 46px;
            margin: 0 !important;
            padding: 0 8px !important;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 14px;
            line-height: 1.1;
        }
    </style>
</head>
<body class="paint-page">
    <div class="container">
        
        <!-- Neuer Bereich: Tages-Challenge -->
        <div class="daily-challenge-container">
            <h2 class="daily-challenge-title">Das heutige Tier ist:</h2>
            <div id="daily-animal-text" class="daily-animal">Lade...</div>
        </div>

        <div class="row" id="game-container">
            <div class="col">
                <div class="name-button">Jovelyn</div>
                <div class="field-with-dot">
                    <span class="status-dot red" id="jovelyn-status"></span>
                    <div class="canvas-wrapper" id="wrapper-jovelyn">
                        <canvas id="jovelyn-canvas"></canvas>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="name-button">Niklas</div>
                <div class="field-with-dot">
                    <div class="canvas-wrapper" id="wrapper-niklas">
                        <canvas id="niklas-canvas"></canvas>
                    </div>
                    <span class="status-dot red" id="niklas-status"></span>
                </div>
            </div>
        </div>

        <!-- Controls are hidden via CSS and shown when a canvas is active via JS helper below -->
        <div class="controls" id="paint-controls" style="display: none;"></div>

        <div class="fullscreen-top-bar" style="display: none;">
            <button id="save-btn" class="control-button">Speichern</button>
            <button id="archive-btn" class="control-button">Archiv</button>
            <button id="clear-btn" class="control-button">Löschen</button>
            <button id="refresh-btn" class="control-button">◆</button>
            <button id="close-fullscreen-btn" class="control-button">Fertig</button>
        </div>

        <div class="fullscreen-bottom-bar" style="display: none;">
            <button id="color-btn" class="control-button">Farbe</button>
            <button id="brush-btn" class="control-button">Pinsel</button>
            <button id="eraser-btn" class="control-button">Radierer</button>
            <button id="undo-btn" class="control-button">Zurück</button>
            <button id="redo-btn" class="control-button">Vor</button>
        </div>
    </div>

    <!-- Brush Settings Panel -->
    <div id="brush-panel" class="panel hidden">
        <div class="panel-header">
            <h3>Pinseleinstellungen</h3>
            <button id="brush-back-btn" class="back-button">Schließen</button>
        </div>
        <div class="panel-content">
            <div class="setting">
                <label for="fill-toggle">Füllen:</label>
                <input type="checkbox" id="fill-toggle" style="width: 24px; height: 24px;">
            </div>
            <div class="setting">
                <label for="brush-size">Stiftdicke:</label>
                <input type="range" id="brush-size" min="1" max="100" value="5">
                <span id="brush-size-value">5</span>
            </div>
            <div class="setting">
                <label for="brush-opacity">Transparenz:</label>
                <input type="range" id="brush-opacity" min="0.1" max="1" step="0.1" value="1">
                <span id="brush-opacity-value">1.0</span>
            </div>
        </div>
    </div>

    <!-- Eraser Settings Panel -->
    <div id="eraser-panel" class="panel hidden">
        <div class="panel-header">
            <h3>Radierer</h3>
            <button id="eraser-back-btn" class="back-button">Schließen</button>
        </div>
        <div class="panel-content">
            <div class="setting"><label for="eraser-fill-toggle">Bereich löschen:</label><input type="checkbox" id="eraser-fill-toggle" style="width: 24px; height: 24px;"></div>
            <div class="setting"><label>Größe:</label><input type="range" id="eraser-size" min="1" max="100" value="20"><span id="eraser-size-value">20</span></div>
            <div class="setting"><label>Transparenz:</label><input type="range" id="eraser-opacity" min="0.1" max="1" step="0.1" value="1"><span id="eraser-opacity-value">1.0</span></div>
        </div>
    </div>

    <!-- Color Picker Panel -->
    <div id="color-panel" class="panel hidden">
        <div class="panel-header">
            <h3>Farbauswahl</h3>
            <button id="color-back-btn" class="back-button">Schließen</button>
        </div>
        <div class="panel-content">
            <div class="setting" style="justify-content: center; margin-bottom: 15px;"><label for="custom-color">Eigene Farbe:</label><input type="color" id="custom-color" value="#000000"></div>
            <div id="color-palette"></div>
        </div>
    </div>

    <!-- Globaler Refresh Button -->
    <button id="global-refresh-btn" class="floating-refresh-btn">◆</button>

    <script src="script.js?v=20260218q"></script>
    <script>
        // Logik für das Tages-Tier
        const animals = [
            "Elefant", "Giraffe", "Loewe", "Tiger", "Zebra", "Pinguin", "Koala", "Panda", 
            "Kaenguru", "Fuchs", "Eule", "Schmetterling", "Schildkroete", "Delfin", "Einhorn", 
            "Drache", "Katze", "Hund", "Hase", "Eichhoernchen", "Flamingo", "Papagei", 
            "Qualle", "Seepferdchen", "Faultier", "Igel", "Marienkaefer", "Biene", "Wolf", "Baer"
        ];
        
        // Wähle ein Tier basierend auf dem Datum (damit es den ganzen Tag gleich bleibt)
        const today = new Date();
        const dayIndex = (today.getDate() + today.getMonth() * 31 + today.getFullYear()) % animals.length;
        document.getElementById('daily-animal-text').innerText = animals[dayIndex];

        // Helper to toggle bars based on body class (similar to index.html)
        const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.attributeName === "class") {
                    const isFullscreen = document.body.classList.contains('mode-fullscreen');
                    const topBar = document.querySelector('.fullscreen-top-bar');
                    const bottomBar = document.querySelector('.fullscreen-bottom-bar');
                    if (topBar && bottomBar) {
                        topBar.style.display = isFullscreen ? 'flex' : 'none';
                        bottomBar.style.display = isFullscreen ? 'flex' : 'none';
                    }
                    // Panels schließen, wenn Vollbild verlassen wird
                    if (!isFullscreen) {
                        document.getElementById('brush-panel').classList.add('hidden');
                        document.getElementById('color-panel').classList.add('hidden');
                        document.getElementById('eraser-panel').classList.add('hidden');
                    }
                }
            });
        });
        observer.observe(document.body, { attributes: true });
    </script>
</body>
</html>






















